| RunID | Files touched | Tests added | Root Cause | Fix Summary |
|-------|---------------|-------------|------------|-------------|
| 18274745982 | CHANGELOG.md; tests/Feature/MessageVisibilityTest.php; TRACEABILITY.md | n/a (lint-only) | Pint failed because imports in MessageVisibilityTest lacked a blank line between class and function groups. | Inserted the required blank line between import groups and documented the lint fix. |
| 18219198113 | .github/workflows/ci.yml; CHANGELOG.md; config/database.php; pint.json; tests/Feature/DatabaseConfigTest.php; TRACEABILITY.md | tests/Feature/DatabaseConfigTest.php (2 tests) | Pint preset unsupported and database credentials mismatched with CI services, breaking lint and migrations. | Switched Pint to a supported preset, aligned CI MySQL/PostgreSQL secrets with Laravel config fallbacks, and added regression tests. |
| 18217747108 | package.json; tests/Unit/BuildConfigTest.php; CHANGELOG.md; TRACEABILITY.md | `tests/Unit/BuildConfigTest.php` (2 tests) | Node treated vite.config.js as CommonJS, so the ESM-only laravel-vite-plugin crashed the build. | Declared the project `type` as `module` and added tests guarding the ESM requirement. |
| local-php-artisan-test | .env.testing; phpunit.xml.dist; CHANGELOG.md; TRACEABILITY.md | Existing suite (`php artisan test`) | Missing `.env` forced the test runner to read MySQL secrets that are absent in CI. | Added a committed `.env.testing` profile and forced SQLite in PHPUnit to eliminate external dependencies. |
| 18252432946 | phpstan.neon; tests/Unit/StaticAnalysisConfigTest.php; CHANGELOG.md; TRACEABILITY.md | `tests/Unit/StaticAnalysisConfigTest.php` (2 tests) | Larastan v2 removed rules.neon, so PHPStan aborted when the config referenced a missing include. | Removed the obsolete include and added tests to ensure PHPStan includes map to real files. |
| E1-F5-I1 | app/Models/Message.php; app/Http/Controllers/Api/MessageController.php; app/Filament/Resources/MessageResource.php; config/logging.php; docs/OPENAPI.yaml | tests/Feature/MessageVisibilityTest.php (6 tests) | Messages lacked visibility separation, RBAC, and observability, so internal notes were indistinguishable from public replies. | Added author_role column, policies, API + Filament CRUD, structured logging, and OpenAPI/README docs for ticket message visibility. |
| E3-F1-I2 | app/Models/KbCategory.php; app/Http/Controllers/Api/KbArticleController.php; app/Services/KbArticleService.php; routes/api.php; docs/OPENAPI.yaml | tests/Feature/KnowledgeBaseApiTest.php (7 tests) | /api/v1/kb-categories; /api/v1/kb-articles | 2024_01_01_001100_create_kb_category_closure_table.php | Implemented brand-scoped knowledge base categories/articles with closure hierarchy, RBAC policies, Filament resources, audit logging, and updated docs. |
| E1-F8-I2 | app/Broadcasting/Events/TicketLifecycleBroadcast.php; app/Http/Controllers/Api/TicketController.php; app/Jobs/BroadcastTicketEventJob.php; app/Models/TicketEvent.php; tests/Feature/TicketLifecycleBroadcastTest.php; composer.json | tests/Feature/TicketLifecycleBroadcastTest.php (9 tests) | Ticket lifecycle events lacked tenant isolation, broadcast wiring, and API coverage. | Added lifecycle event model + job broadcasting stack, enforced tenant-aware guard on ticket routes, registered factories, and codified API/resource tests. |
| E2-F6-I2 | app/Filament/Resources/AuditLogResource.php; app/Filament/Resources/AuditLogResource/Pages/ListAuditLogs.php; app/Filament/Resources/ContactResource.php; app/Filament/Resources/ContactResource/Pages/CreateContact.php; app/Filament/Resources/ContactResource/Pages/EditContact.php; app/Filament/Resources/TicketResource.php; app/Filament/Resources/TicketResource/Pages/EditTicket.php; app/Http/Controllers/Api/AuditLogController.php; app/Http/Requests/ApiFormRequest.php; app/Http/Requests/AuditLogIndexRequest.php; app/Http/Resources/AuditLogResource.php; app/Models/AuditLog.php; app/Policies/AuditLogPolicy.php; app/Policies/ContactPolicy.php; app/Providers/AuthServiceProvider.php; app/Services/ContactAuditLogger.php; app/Services/ContactService.php; app/Services/KbArticleService.php; app/Services/KbCategoryService.php; app/Services/MessageService.php; app/Services/TicketAuditLogger.php; app/Services/TicketService.php; database/factories/AuditLogFactory.php; database/migrations/2025_02_16_000000_add_brand_to_audit_logs_table.php; database/seeders/DemoDataSeeder.php; database/seeders/RolesAndPermissionsSeeder.php; docs/OPENAPI.yaml; resources/views/filament/audit-log-view.blade.php; routes/api.php; tests/Feature/AuditLogWritersTest.php; README.md; CHANGELOG.md | tests/Feature/AuditLogWritersTest.php (7 tests) | GET /api/v1/audit-logs | 2025_02_16_000000_add_brand_to_audit_logs_table.php | Added tenant/brand scoped audit logging services, Filament read-only viewer, standardized API with validation + docs, and seeded demo entries. |
| E2-F2-I1 | app/Exceptions/Handler.php; app/Filament/Resources/RoleResource.php; app/Filament/Resources/RoleResource/Pages/CreateRole.php; app/Filament/Resources/RoleResource/Pages/EditRole.php; app/Filament/Resources/RoleResource/Pages/ListRoles.php; app/Http/Controllers/Api/RoleController.php; app/Http/Requests/StoreRoleRequest.php; app/Http/Requests/UpdateRoleRequest.php; app/Http/Resources/RoleResource.php; app/Models/Role.php; app/Models/Tenant.php; app/Observers/TenantObserver.php; app/Policies/RolePolicy.php; app/Providers/AppServiceProvider.php; app/Providers/AuthServiceProvider.php; app/Services/RoleAuditLogger.php; app/Services/RoleService.php; app/Services/TenantRoleProvisioner.php; config/permission.php; database/factories/RoleFactory.php; database/migrations/2025_10_06_112135_add_tenant_scope_to_roles_table.php; database/seeders/DemoDataSeeder.php; database/seeders/RolesAndPermissionsSeeder.php; docs/OPENAPI.yaml; routes/api.php; tests/Feature/RoleManagementTest.php; README.md; CHANGELOG.md | tests/Feature/RoleManagementTest.php (12 tests) | GET /api/v1/roles; POST /api/v1/roles; GET /api/v1/roles/{role}; PATCH /api/v1/roles/{role}; DELETE /api/v1/roles/{role} | 2025_10_06_112135_add_tenant_scope_to_roles_table.php | Seeded per-tenant admin/agent/viewer roles with audit logging, exposed tenant-scoped role CRUD via API & Filament, and documented permissions plus error handling. |

## Merge Conflict Resolution â€” PR #448

* Base: main
* Head: implement-p0-issue-in-laravel
* Strategy: merge
* Commit: 3b1929abdfd4dc954c39c182023d96d1a9dee24f
* Files Resolved:

  * none (branch already up to date)
* Notes:

  * No conflicts were detected; base was already merged.
  * FIXME markers left: none
